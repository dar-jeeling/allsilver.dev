---
title: '220602 TIL'
date: 2022-06-02 23:57:44
tags: ['TiL']
category: 'ë°ë¸Œì½”ìŠ¤'
draft: false
---

**ğŸ© = ê°œì¸ì˜ê²¬ å¤š**

## Today I Learned

### Hook

**ğŸ©** Custom Hook ì„ ë§Œë“¤ì–´ë‚˜ê°€ë©´ì„œ ê°•ì˜ë¥¼ ë“£ë˜ ì™€ì¤‘ì—, Hookì— ëŒ€í•œ ì´í•´ê°€ ì¡°ê¸ˆ ë” í•„ìš”í•  ê²ƒ ê°™ì•„ì„œ ì¡°ê¸ˆ ë” ê¹Šì€ ë‚´ìš©ì— ëŒ€í•´ì„œ ì°¾ì•„ë³´ì•˜ë‹¤.

- Hookì„ íŠ¹ì • ìƒíƒœì™€ ìƒíƒœ ê´€ë ¨ ë¡œì§ì„ ìº¡ìŠí™” í•œë‹¤.
- **ğŸ© Hookì„ í†µí•œ íŠ¹ì • ìƒíƒœë¥¼ ìœ„í•œ "ìº¡ìŠí™”"ë¼ëŠ” ë‹¨ì–´ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´, í´ë¡œì €ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ëœë‹¤.**
- **ğŸ© ê·¸ë¦¬ê³  `ReactëŠ” íŠ¹ì • stateê°€ ì–´ë–¤ useState í˜¸ì¶œì— í•´ë‹¹í•˜ëŠ”ì§€ êµ¬ë³„í•˜ê¸° ìœ„í•˜ì—¬ "ë°°ì—´"ì„ ì´ìš©í•˜ì—¬ êµ¬í˜„`í•˜ê²Œ ëœë‹¤. [ë¦¬ì•¡íŠ¸ ê³µì‹ë¬¸ì„œì˜ Hook ê·œì¹™ì—ì„œ "ìµœìƒìœ„(at the Top Level)ì—ì„œë§Œ Hookì„ í˜¸ì¶œí•˜ê³ , ë°˜ë³µë¬¸, ì¡°ê±´ë¬¸ í˜¹ì€ Hookì„ í˜¸ì¶œí•˜ì§€ ë§ˆì„¸ìš”"](https://ko.reactjs.org/docs/hooks-rules.html) ë¼ê³  ì í˜€ìˆëŠ” ì´ìœ ê°€ ë°”ë¡œ ì´ ì´ìœ ì´ë‹¤.**
- **ğŸ©** ê°„ë‹¨í•˜ê²Œ ëª¨ë“ˆíŒ¨í„´ì„ í†µí•˜ì—¬ êµ¬í˜„ëœ React ë¼ëŠ” ëª¨ë“ˆì´ ìˆì„ ë•Œ, ì´ useStateì™€ useEffectëŠ” ëŒ€ëµ ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„ëœë‹¤.

```javascript
// ì˜ˆì œ 4 (ì¶œì²˜ : https://www.netlify.com/blog/2019/03/11/deep-dive-how-do-react-hooks-really-work/ )
const MyReact = (function() {
  let hooks = [],
    currentHook = 0 // Hook ë°°ì—´ê³¼ ë°˜ë³µì(iterator)!
  return {
    render(Component) {
      const Comp = Component() // ì´í™íŠ¸ë“¤ì´ ì‹¤í–‰ëœë‹¤.
      Comp.render()
      currentHook = 0 // ë‹¤ìŒ ë Œë”ë¥¼ ìœ„í•´ ì´ˆê¸°í™”
      return Comp
    },
    useEffect(callback, depArray) {
      const hasNoDeps = !depArray
      // hookì— ë”°ë¼ dependencyê°€ ë‹¬ë¼ì§€ë¯€ë¡œ
      const deps = hooks[currentHook] // type: array | undefined
      const hasChangedDeps = deps
        ? !depArray.every((el, i) => el === deps[i])
        : true
      if (hasNoDeps || hasChangedDeps) {
        callback()
        hooks[currentHook] = depArray
      }
      currentHook++ // ì´ Hookì— ëŒ€í•œ ì‘ì—… ì™„ë£Œ
    },
    useState(initialValue) {
      hooks[currentHook] = hooks[currentHook] || initialValue // type: any
      const setStateHookIndex = currentHook // setStateì˜ í´ë¡œì €ë¥¼ ìœ„í•´! (ì´ í›…ì´ ì‚¬ìš©ë˜ëŠ” ì¸ë±ìŠ¤)
      const setState = newState => (hooks[setStateHookIndex] = newState)
      return [hooks[currentHook++], setState]
    },
  }
})()
```

1\. ëª¨ë“ˆ íŒ¨í„´ì„ ìœ„í•˜ì—¬ í•¨ìˆ˜ê°€ ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ë¡œ ê°ì‹¸ì ¸ìˆê³ , ê·¸ ì•ˆì— ì§€ì—­ë³€ìˆ˜ë¡œ `hook` ë°°ì—´ê³¼ ë°˜ë³µìì¸ `currentHook`ì´ ì¡´ì¬í•œë‹¤.

2\. `useEffect`ëŠ” ì¸ìë¡œ `callback`ê³¼ `depArray`ë¥¼ ë°›ëŠ”ë‹¤.Â  `depArray`ì˜ ì¸ìê°€ ë“¤ì–´ì™”ëŠ”ì§€, ë“¤ì–´ì˜¤ì§€ ì•Šì•˜ëŠ”ì§€ì— ë”°ë¼ì„œ `hasNoDeps`ì˜ ê°’ì„ íŒë‹¨í•˜ê³ , í˜„ì¬ í›…ì´ í•´ë‹¹í•˜ëŠ” indexì— ìˆëŠ” depsë¥¼ í†µí•˜ì—¬ dependencyë¥¼ íŒë‹¨í•œë‹¤. (`hasChangeDep`)

ì´ ë•Œ, `hasNoDeps`(ì˜ì¡´ì„±ì´ ì—†ëŠ” ê²½ìš°)ê±°ë‚˜ `hasChangedDeps`(dependencyì˜ ê°’ì´ ë°”ë€ ê²½ìš°)ì— callbackì„ í˜¸ì¶œí•˜ê³ , dependencyë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤.

3\. `useState`ì—ì„œëŠ” ì¸ìë¡œ `initialValue`ë¥¼ ë°›ëŠ”ë‹¤. ì´ í›…ì˜ setterì—ì„œ ì‚¬ìš©ë  indexë¥¼ ìœ„í•˜ì—¬ `setStateHookIndex` ë¥¼ ì •ì˜í•˜ê³ , ì´ ì¸ë±ìŠ¤ì— í•´ë‹¹í•˜ëŠ” hookì„ newStateë¡œ í•œë‹¤.

4\. useState í›…ê³¼ useEffect í›… ëª¨ë‘ ì‹¤í–‰ë˜ê³  ë‚˜ì„œ, ì¸ë±ìŠ¤ë¥¼ ì¦ê°€ì‹œí‚¨ë‹¤.

### useRef

![](https://blog.kakaocdn.net/dn/tGksG/btrDRNBa6JR/9Gzq1qwrPfDtbYEJGOYPVk/img.png)useRefì˜ êµ¬í˜„ í˜•íƒœ

- `useRef`ëŠ” DOM elementì— ì ‘ê·¼í•˜ê±°ë‚˜, ì¼ì¢…ì˜ "ê¸°ë°˜ì ì¸ ì •ë³´(infrastructure)"ë¥¼ ì €ì¥í•  ë•Œ ì‚¬ìš©í•œë‹¤. (stateì™€ ë‹¤ë¥¸ ì ì€, stateëŠ” í™”ë©´ì— ë°”ë¡œ ë Œë”ë§ë˜ëŠ” ì •ë³´ë¥¼ ì €ì¥í•œë‹¤ëŠ” ê²ƒì´ë‹¤.)
- **ğŸ© ì˜ˆë¥¼ ë“¤ë©´ `setTimeout`ì´ë‚˜ `setInterval`ì˜ ë¦¬í„´ê°’ì¸ ID ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì¦‰, í™”ë©´ì˜ ë Œë”ë§ ì •ë³´ê°€ ì•„ë‹Œ ì–´ë–¤ íš¨ê³¼(side-effect)ë¥¼ ìœ„í•œ ê¸°ë°˜ì´ ë˜ëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.**
- **ğŸ© ì´ ì´ìœ ëŠ”, `useRef`ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë˜ë”ë¼ë„ ê°’ì´ ë³€í•˜ì§€ ì•Šê³ , ë§ˆì°¬ê°€ì§€ë¡œ referenceë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤ê³  ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë˜ì§€ë„ ì•ŠëŠ”ë‹¤.**
- `useRef`ì˜ ê²½ìš°, reference ê°ì²´ë¡œ êµ¬í˜„ì´ ë˜ê³ , ì´ ê°ì²´ëŠ” `current` í”„ë¡œí¼í‹°ë¥¼ ê°€ì§€ë©° ì´ í”„ë¡œí¼í‹° ì•ˆì— `refereceValue`ê°€ ë“¤ì–´ê°„ë‹¤.

### Custom Hook ë§Œë“¤ê¸°

- **ğŸ©** ìœ„ì—ì„œ Hookì— ëŒ€í•´ ê³µë¶€í•´ë³´ê³  ë‚˜ì„œ, custom Hookì€ `useState`ì™€ `useEffect`ì™€ ê°™ì€ í›…ì„ ì‚¬ìš©í•´ì„œ custom ëœ stateë¥¼ ë¦¬í„´í•˜ëŠ” í›…ì´ë‹¤. ì •ë„ë¡œ ì´í•´í•˜ì˜€ë‹¤.
- **ğŸ©** ë˜í•œ ë¦¬ì•¡íŠ¸ ê³µì‹ë¬¸ì„œì—ì„œ hookì€ React í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ ë˜ëŠ” custom Hookì—ì„œë§Œ í˜¸ì¶œí•˜ë¼ê³  í•œ ë‚´ìš©ì´ ìˆë‹¤. ì´ ë‚´ìš©ì„ í†µí•˜ì—¬ custom Hookì´ ë¦¬ì•¡íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” hookì„ í†µí•˜ì—¬ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆìŒì„ ì˜ˆìƒí•  ìˆ˜ ìˆë‹¤.

#### useResize

- íƒ€ê²Ÿ elementì˜ í¬ê¸°ê°€ ë³€í–ˆì„ ë•Œ ì´ë²¤íŠ¸ë¥¼ ì‹¤í–‰íˆí‚¤ëŠ” Hookì´ë‹¤.
- `ResizeObserver(callback)`ì„ í†µí•˜ì—¬ resize ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ê²ƒì„ ì¶”ì í•œë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ë©´ `observer.observe(element)`ë¥¼ í†µí•˜ì—¬ elementì˜ í¬ê¸°ê°€ ë³€í–ˆì„ ë•Œ, ì´ observerê°€ ë„˜ê²¨ë°›ì€ callbackì„ ì‹¤í–‰í•œë‹¤.
- ë™ì‘ ì›ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤ :

  1\. `useRef`ë¥¼ í†µí•˜ì—¬ handlerì™€Â  ref ì •ë³´ë¥¼ ë‹´ëŠ” reference ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. ì´ ë•Œ handlerì˜ ê²½ìš° ìµœì í™”ë¥¼ ìœ„í•´ì„œ (ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ëœë‹¤ê³  ì¬ë Œë”ë§í•˜ì§€ ì•Šìœ¼ë©°, ì´ ê°’ì´ ë°”ë€Œë”ë¼ë„ ì¬ë Œë”ë§ í•˜ê²Œ í•˜ì§€ ì•Šê¸° ìœ„í•˜ì—¬) `useRef`ë¥¼ í†µí•˜ì—¬ referenceë¥¼ ìƒì„±í•˜ì˜€ê³ , refì˜ ê²½ìš° ì´ í›…ì˜ ë™ì‘ì„ ì‚¬ìš©í•˜ê²Œ ë  DOM ìš”ì†Œë¥¼ ë‹´ëŠ”ë‹¤.

  2\. useEffectë¥¼ í†µí•˜ì—¬ ì´ë²¤íŠ¸ë¥¼ êµ¬í˜„í•œë‹¤. ì´ ë•Œ, dependencyëŠ” ref ì´ë‹¤. (DOM ìš”ì†Œì— ì˜ì¡´ì ì¸ ì´ë²¤íŠ¸ì´ë¯€ë¡œ)

  3\. ì´ í›…ì„ ì‚¬ìš©í•˜ì—¬ ì•ˆì— callbackì„ ë„˜ê¸°ê²Œë˜ë©´ callbackìœ¼ë¡œ ë„˜ê¸´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ê³ , `useResize` í•¨ìˆ˜ ë‚´ë¶€ì˜ observerì—ì„œ ë„˜ê²¨ì§„ callbackì´ ì‹¤í–‰ë˜ëŠ”ë°(`savedHandler.current`) ì¸ìë¡œ í˜„ì¬ ë³€ê²½ëœ ì‚¬ì´ì¦ˆë¥¼ `countentRect`ë¡œ ë„˜ê²¨ì£¼ê²Œ ëœë‹¤. (savedHnalder.current(entries[0].contentRect),) ë”°ë¼ì„œ, ì´ ê°’ì„ í†µí•´ ref ë¡œ ë°›ì€ DOMì˜ width ì™€ heightë¥¼ ì´ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

- **ğŸ© í•¨ìˆ˜ë¥¼ ë„˜ê¸°ëŠ” ê³¼ì •ì´ ìµìˆ™í•˜ì§€ ì•Šì•„ì„œ ë™ì‘ì„ ì´í•´í•˜ê¸°ê°€ ì–´ë ¤ì› ë‹¤... í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì´ TIL ë‹¤ì“°ê³  ì •ì£¼í–‰ í•˜ëŸ¬ê°€ê² ë‹¤...**

#### useLocalStorage / useSessionStorage

- keyì™€ initialValueë¥¼ ë°›ìœ¼ë©´ ë¡œì»¬(ì„¸ì…˜) ìŠ¤í† ë¦¬ì§€ì— ê·¸ í‚¤ì— ëŒ€í•œ ê°’ì„ ê°€ì ¸ì˜¤ê±°ë‚˜, í‚¤ì— ëŒ€í•œ ê°’ì„ set í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” hook ì´ë‹¤.

#### useForm

#### useTimeout

- í•¨ìˆ˜ í˜¸ì¶œì„ ì´ìš©í•˜ì—¬, íƒ€ì´ë¨¸ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒê³¼ íƒ€ì´ë¨¸ë¥¼ ë©ˆì¶”ëŠ” ê²ƒ ë™ì‘ì„ ë”°ë¡œ ìˆ˜í–‰í•˜ëŠ” `useTimeoutFn`ê³¼ ì»´í¬ë„ŒíŠ¸ê°€ ë¡œë“œë˜ìë§ˆì íƒ€ì´ë¨¸ê°€ ì‹¤í–‰ë˜ëŠ” `useTimeout` í›…ì„ ë”°ë¡œ ë§Œë“¤ì—ˆë‹¤.
- ë”°ë¼ì„œ `useTimeoutFn`ì„ ë¨¼ì € êµ¬í˜„í•˜ê³ , `useTimeout` ì—ì„œëŠ” `useEffect`ë¥¼ ì´ìš©í•˜ì—¬ í›…ì´ ì‹¤í–‰ë˜ìë§ˆì `useTimeoutFn`ì„ í†µí•˜ì—¬ timeoutì„ ì‹¤í–‰í•˜ë„ë¡ í•œë‹¤.
- ì—­ì‹œ ë‚´ë¶€ ë¡œì§(ë‚´ë¶€ side-effect)ë¥¼ ìœ„í•œ ë¶€ë¶„ì€ `useRef`ë¥¼ ì´ìš©í•˜ì—¬ ìµœì í™” í•  ìˆ˜ ìˆë‹¤. ì´ í›…ì—ì„œëŠ” timeoutIdì™€ ì¸ìë¡œ ë°›ì€ callback ì„ `useRef`ë¡œ ì €ì¥í•œë‹¤. ë˜í•œ callbackì˜ ê²½ìš°, ì¸ìê°€ ë³€í•  ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì—¬ `useEffect`ë¥¼ ì´ìš©í•œë‹¤.
- ì£¼ì˜í•´ì•¼ í•  ì ì€ ë§ˆì§€ë§‰ì— `useEffect`ë¥¼ í†µí•˜ì—¬ `clear`ë¥¼ ì‹¤í–‰í•´ì•¼ í•œë‹¤.

#### useInterval

- ë°˜ë³µì ì¸ ë¡œì§ì„ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©í•˜ëŠ” í›…ì´ë‹¤. `useTimeout`ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì‹œì‘ê³¼ ë©ˆì¶¤ ë™ì‘ì„ ë‘˜ ë‹¤ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” `useIntervalFn`ê³¼ ì»´í¬ë„ŒíŠ¸ê°€ ë¡œë“œë˜ìë§ˆì ì‹¤í–‰ë˜ëŠ” `useInterval` í›…ì„ ë”°ë¡œ ì œì‘í•˜ì˜€ë‹¤.

#### useDebounce

- debounceëŠ” íŠ¹ì • ê¸°ê°„ ë‚´ì— ê°™ì€ ì´ë²¤íŠ¸ê°€ í˜¸ì¶œë˜ì—ˆì„ ë•Œ, ê°€ì¥ ë§ˆì§€ë§‰ ì´ë²¤íŠ¸ë§Œ í˜¸ì¶œí•˜ê²Œ í•˜ëŠ” ê¸°ë²•ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ ê²€ìƒ‰ì„ í•  ë•Œ, í‚¤ì›Œë“œë¥¼ ê²€ìƒ‰í•  ë•Œ ëª¨ë“  ê¸€ìì— ëŒ€í•´ì„œ apië¥¼ í˜¸ì¶œí•˜ë©´ ë‚­ë¹„ê°€ ì‹¬í•˜ë¯€ë¡œ.. ì…ë ¥ì„ ë§ˆì¹˜ê³  ë§¨ ë§ˆì§€ë§‰ì—ì„œ nì´ˆ ì´í›„ì— apië¥¼ í˜¸ì¶œí•˜ëŠ” ë“±ì˜ ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.
- ìœ„ì˜ `useTimeout`ì„ ì‚¬ìš©í•˜ì—¬, dependency (ìœ„ ì˜ˆì œì—ì„œëŠ” ê²€ìƒ‰ì–´)ê°€ ë³€í•  ë•Œ ë§ˆë‹¤ `useTimeout` ì„ í†µí•´ ì¼ì •ì‹œê°„ì„ ì§€ë‚˜ê²Œí•˜ê³  ì½œë°±ìœ¼ë¡œ ë„˜ê²¨ì¤€ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê²Œ í•˜ëŠ” ì‹ìœ¼ë¡œ êµ¬í˜„ëœë‹¤.

## íšŒê³ 

- í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì„ ë˜‘ë°”ë¡œ ê³µë¶€í•˜ì§€ ì•Šì€ ê²ƒì— ëŒ€í•œ ì—…ë³´ë¥¼... ì œëŒ€ë¡œ ë°›ê³  ìˆë‹¤. í•¨ìˆ˜ê°€ ì¸ìë¡œ ë„˜ì–´ê°€ê³  ì´ í•¨ìˆ˜ê°€ ë¬´ì—‡ì„ ê°€ë¦¬í‚¤ëŠ”ê²Œ ë„ˆë¬´ í—·ê°ˆë ¤ì„œ ë™ì‘ ì›ë¦¬ë¥¼ ì´í•´í•˜ê¸°ê°€ ì‰½ì§€ ì•Šì•˜ë‹¤. í•¨ìˆ˜ë‘ ì–´ì„œ ì¹œí•´ì§€ë„ë¡ í•˜ê² ë‹¤ã… ã… Â  map filter reduce map filter reduce...

## Reference

> [The Complete Guide to useRef() and Refs in React](https://dmitripavlutin.com/react-useref-guide/)

> [[ë²ˆì—­] ì‹¬ì¸µ ë¶„ì„: React Hookì€ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ë™ì‘í• ê¹Œ?](https://hewonjeong.github.io/deep-dive-how-do-react-hooks-really-work-ko/)

## ë³´ë„ˆìŠ¤..?

> [ [ë²ˆì—­] The Complete Guide to useRef() and Refs in React](https://breakyourlimit.notion.site/The-Complete-Guide-to-useRef-and-Refs-in-React-f6f837a0c21e480890b1a49e6a9eddb4)

ì²«ë²ˆì§¸ referenceì— ëŒ€í•œ í—ˆì ‘í•œ ë‚˜ì˜ ë²ˆì—­ë³¸...
